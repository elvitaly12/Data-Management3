<!DOCTYPE html>
<html>
<head>
	<title>Read CSV</title>
   <link href="https://unpkg.com/tabulator-tables@4.8.4/dist/css/tabulator.min.css" rel="stylesheet">
<script type="text/javascript" src="https://unpkg.com/tabulator-tables@4.8.4/dist/js/tabulator.min.js"></script>
    <script type = "text/javascript" src ="papaparse.min.js">
</script>
    File Upload
</head>

<body>
    <table>
        <tr>
            <th>
                <input type="file" accept=".csv"  id="myFile" name="filename" >
            </th>
        </tr>
    </table>
<!--    <input type="submit" onclick="later()">-->
    <button id ="btn_csv_upload">Submit</button>

<div id="example-table"></div>

</body>


</html>

<!--<script>-->
<!--    var table = new Tabulator("#example-table", {-->
<!--    height:"311px",-->
<!--    renderHorizontal:"virtual",-->
<!--    columns:[-->
<!--        {title:"col1", field:"col1"},-->
<!--        //...-->
<!--        {title:"col499", field:"col499"},-->
<!--    ],-->
<!--});-->
<!--</script>-->


<script>

    let csv_button = document.getElementById('btn_csv_upload').addEventListener('click',()=> {
        Papa.parse(document.getElementById('myFile').files[0],
            {
                download:true,
                header:true,
                complete:function (results)
                {

                   let table = new Tabulator("#example-table", {
                        data:results.data, //assign data to table-->
                       autoColumns:true, //create columns from data field names-->
                   });

                }

            })
})

    // function  get_data(results)
    // {
    //    results.data.map(data,index)
    //
    //
    // }

    </script>